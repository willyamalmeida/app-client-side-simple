Store=function(t){if(!t)throw"key undefined";this.key=t,this.init()},Store.prototype={init:function(){localStorage.getItem(this.key)||this.saveLocalStorage([]),this.list=this.get()},assertItem:function(t){if(!t)throw"item is null";0===t.id||this.assertItemExist(t.id)},assertItemExist:function(t){if(!this.getItemById(t))throw"item not exist"},save:function(t,e){this.assertItem(t);var i=0===t.id,s=this.get();i?(t.id=this.getNextId(s),s.push(t)):e(this.getItem(s,t.id));this.saveLocalStorage(s)},saveLocalStorage:function(t){var e=JSON.stringify(t);localStorage.setItem(this.key,e)},get:function(){var t=localStorage.getItem(this.key);return JSON.parse(t)},getItemById:function(t){var e=this.get();return this.getItem(e,t)},getItem:function(t,e){return t.find(function(t){return t.id===Number(e)})},getNextId:function(t){return t.reduce(function(t,e){return t.push(e.id),t},[0]).reduce(function(t,e){return Math.max(t,e)})+1},clear:function(){localStorage.removeItem(this.key)},removeItem:function(t){this.assertItemExist(t);var e=this.get(),i=this.getItemById(t);e.pop(i),this.saveLocalStorage(e)}};