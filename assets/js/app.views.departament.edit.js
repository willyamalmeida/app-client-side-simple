app={views:{departament:{}}},app.views.departament.edit=function(e){if(!e)throw"Element undefined";this.$el=e,this.db=new Store("departaments"),this.init()},app.views.departament.edit.prototype={init:function(){this.$elSave=this.$el.parentElement.querySelector("[name='save']"),this.$elDelete=this.$el.parentElement.querySelector("[name='delete']"),this.$elCancel=this.$el.parentElement.querySelector("[name='cancel']"),this.$elId=this.$el.parentElement.querySelector("[name='id']"),this.$elDescription=this.$el.parentElement.querySelector("[name='description']"),location.search&&this.dataFill(),this.initEvents()},dataFill:function(){var e=window.location.search.replace("?","").split("&").reduce(function(e,t){var i=t.split("=");return e[i[0]]=i[1],e},{});this.$elId.value=e.id;var t=0===Number(e.id);if(!t){var i=this.db.getItemById(e.id);this.$elDescription.value=i.description}this.$elId.disabled=!0,this.$elId.readOnly=!0,this.$elDescription.focus(),this.$elDelete.hidden=t},valid:function(e){if(!e.description){var t="Description is required";throw alert(t),t}},save:function(){var e={id:Number(this.$elId.value),description:this.$elDescription.value};this.valid(e),this.db.save(e,function(t){t.description=e.description})},delete:function(){this.db.removeItem(Number(this.$elId.value))},goIndex:function(){window.location="index.html"},initEvents:function(){var e=this;this.$elSave.addEventListener("click",function(){e.save(),e.goIndex()}),this.$elDelete.addEventListener("click",function(){e.delete(),e.goIndex()}),this.$elCancel.addEventListener("click",function(){e.goIndex()})}};